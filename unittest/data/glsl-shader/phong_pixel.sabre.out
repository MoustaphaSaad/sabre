layout(location = 0) in vec4 RESERVED_input_position;
layout(location = 1) in vec3 RESERVED_input_vertex_position;
layout(location = 2) in vec3 RESERVED_input_vertex_normal;

layout(location = 0) out vec4 _entry_point_output_color;

struct main_PS_Input {
	vec4 position;
	vec4 vertex_position;
	vec4 vertex_normal;
};

struct main_PS_Output {
	vec4 color;
};

struct main_main_Model {
	mat4 model_matrix;
	mat4 model_inverse_transposed;
	mat4 color;
};

layout(binding = 3, std140) uniform main_main_model {
	mat4 main_main_model_model_matrix;
	mat4 main_main_model_model_inverse_transposed;
	vec4 main_main_model_color;
};

vec4 main_main_normalize(vec4 a, vec4 b) {
	return a + b;
}

struct main_main_Light {
	vec3 direction;
	vec3 color;
};

layout(binding = 2, std140) uniform main_main_light {
	vec3 main_main_light_direction;
	vec4 main_main_light_color;
};

main_PS_Output main_main(main_PS_Input RESERVED_input) {
	vec4 _tmp_1;
	_tmp_1.x = RESERVED_input.vertex_position;
	_tmp_1.y = 1.0;
	vec4 world_pos = main_main_model_model_matrix * _tmp_1;
	vec4 _tmp_2;
	_tmp_2.x = RESERVED_input.vertex_normal;
	_tmp_2.y = 0.0;
	vec3 normal = main_main_model_model_inverse_transposed * _tmp_2.xyz;
	normal = normalize(normal);
	const float main_main_ambient_factor = 0.3;
	vec4 ambient_color = main_main_ambient_factor * main_main_light_color;
	vec3 dir = normalize(-main_main_light_direction);
	float diffuse_factor = main_main_max(main_main_dot(normal, dir), 0.0);
	vec4 diffuse_color = diffuse_factor * main_main_light_color;
	main_PS_Output RESERVED_output;
	RESERVED_output.color.rgb = ambient_color.rgb + diffuse_color.rgb * main_main_model_color.rgb;
	RESERVED_output.color.a = main_main_model_color.a;
	vec4 koko = main_main_normalize(RESERVED_output.color, RESERVED_output.color);
	return RESERVED_output;
}

void main() {
	main_PS_Input RESERVED_input;
	RESERVED_input.position = RESERVED_input_position;
	RESERVED_input.vertex_position = RESERVED_input_vertex_position;
	RESERVED_input.vertex_normal = RESERVED_input_vertex_normal;
	
	main_PS_Output _tmp_3 = main_main(RESERVED_input);
	_entry_point_output_color = _tmp_3.color;
}
